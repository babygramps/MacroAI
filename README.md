# MacroAI - Smart Calorie & Macro Tracker

A mobile-responsive calorie and macro tracking web app built with Next.js 15, AWS Amplify Gen 2, and AI-powered food recognition.

![MacroAI](https://img.shields.io/badge/MacroAI-Neon%20Vitality-FF6B35?style=for-the-badge)

## Features

- **Smart Food Search** - Search USDA FoodData Central for whole foods
- **Barcode Scanning** - Scan packaged products via Open Food Facts
- **Natural Language Logging** - Type "2 eggs and bacon" and get instant nutrition
- **AI Photo Analysis** - Take a photo and let Gemini 3 identify foods
- **Beautiful Dark UI** - "Neon Vitality" design with animated progress rings
- **Cost-Optimized** - Waterfall strategy prioritizes free APIs first

## Tech Stack

- **Framework:** Next.js 15 (App Router)
- **Styling:** Tailwind CSS v4
- **Infrastructure:** AWS Amplify Gen 2
- **Auth:** AWS Cognito
- **Database:** AWS DynamoDB
- **AI:** Google Gemini 3 Flash

## Getting Started

### Prerequisites

- Node.js 18+
- AWS Account with Amplify configured
- API Keys for:
  - [USDA FoodData Central](https://fdc.nal.usda.gov/api-key-signup.html) (Free)
  - [Google AI Studio](https://aistudio.google.com/) for Gemini API (Free tier available)

### Installation

1. **Clone and install dependencies:**

```bash
cd MacroAI
npm install
```

2. **Start the Amplify sandbox:**

```bash
npx ampx sandbox
```

This will deploy the backend (Cognito + DynamoDB) and generate `amplify_outputs.json`.

3. **Set your API secrets:**

```bash
npx ampx sandbox secret set USDA_API_KEY
# Enter your USDA API key when prompted

npx ampx sandbox secret set GEMINI_API_KEY
# Enter your Gemini API key when prompted
```

4. **Start the development server:**

```bash
npm run dev
```

5. **Open the app:**

Navigate to [http://localhost:3000](http://localhost:3000)

## Project Structure

```
MacroAI/
├── amplify/                 # AWS Amplify Gen 2 backend
│   ├── auth/resource.ts     # Cognito configuration
│   ├── data/resource.ts     # DynamoDB schema
│   └── backend.ts           # Backend definition
├── src/
│   ├── app/                 # Next.js App Router pages
│   │   ├── page.tsx         # Dashboard
│   │   └── onboarding/      # Goal setup flow
│   ├── components/          # React components
│   │   ├── ui/              # Reusable UI (ProgressRing, etc.)
│   │   ├── Dashboard.tsx
│   │   ├── FoodLogModal.tsx
│   │   └── BarcodeScanner.tsx
│   ├── actions/             # Server Actions
│   │   ├── searchFoods.ts   # USDA + Open Food Facts
│   │   ├── parseTextLog.ts  # Gemini + USDA hybrid parsing
│   │   └── analyzeImage.ts  # Gemini 3 Vision
│   └── lib/                 # Utilities
│       ├── normalizer.ts    # API response normalization
│       ├── cache.ts         # DynamoDB caching
│       ├── data/            # Data access helpers
│       ├── hooks/           # Shared React hooks
│       ├── types/           # Domain types
│       └── types.ts         # TypeScript exports
└── amplify_outputs.json     # Generated by sandbox
```

## Data Sources (Waterfall Strategy)

The app prioritizes free APIs to minimize costs:

1. **USDA FoodData Central** - Unlimited, free, best for whole foods
2. **Open Food Facts** - Unlimited, free, for packaged goods/barcodes
3. **Gemini 3 Flash** - Free tier + pay-per-use, for images/complex text

Results are cached in DynamoDB to avoid repeated API calls.

## Design System

**Theme:** "Neon Vitality" - Dark, immersive interface with vibrant accent colors

| Element | Color |
|---------|-------|
| Calories | `#FF6B35` (Burning Orange) |
| Protein | `#00E5A0` (Electric Mint) |
| Carbs | `#FFD23F` (Golden Yellow) |
| Fat | `#A855F7` (Vivid Purple) |

**Fonts:**
- Satoshi (UI text)
- Space Mono (numbers)

## Deployment

Deploy to AWS Amplify Hosting:

```bash
npx ampx pipeline-deploy --branch main --app-id YOUR_APP_ID
```

Or connect your GitHub repo to Amplify Hosting for CI/CD.

## Environment Variables

For production, set these in Amplify Console → Environment Variables:

- `USDA_API_KEY`
- `GEMINI_API_KEY`

## License

MIT
